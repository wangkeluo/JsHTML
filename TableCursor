<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

<script>
$(document).keydown(function(e){
	var $current = e.target.closest("td");
	var $tr = e.target.closest("tr");
	var $i = 0;
	while	(($current.previousElementSibling)!= null){
		$current=$current.previousElementSibling;
		$i++;
	};
	var	$parent = $current.parentNode;
	// up code: 38
	if (e.keyCode == 38) {
		var $previous = $parent.previousElementSibling;
		//get the fist child of the tr node
		if ($previous !=null) {
		while($previous.nodeType !=1){
				$previous=$previous.previousElementSibling;
			}
		 		getAdjacentNode($previous,$i);
		};
	
	};
	// down code: 40
	if (e.keyCode == 40) {
		var $next = $parent.nextElementSibling;
		//get the fist child of the tr node
		if ($next !=null) {
		while($next.nodeType !=1){
				$next=$next.nextElementSibling;
			}
				getAdjacentNode($next,$i);
		};
	};

});

function getAdjacentNode($rowNode,$i){

		$td = $rowNode.firstElementChild;
		while($td.getElementsByTagName("input")[0] == null){
			$td = $td.nextElementSibling;
			$i=$i-1;
		}
		$td.getElementsByTagName("input")[0].focus();
    //move cursor to right place
			while ($i > 0){
				if ($td.nextElementSibling.getElementsByTagName("input")[0] == null) {
				$td= $td.nextElementSibling;
				}
				else {
				$td.nextElementSibling.getElementsByTagName("input")[0].focus();
				$td= $td.nextElementSibling;
				}
				$i=$i-1;
			}
}
</script>
